{% extends 'common/base.html' %}

{% block content %}


 <style>
#modal {
<!--  display:none;-->
  position:relative;
  width:100%;
  height:100%;
  z-index:1;
}

#modal h2 {
  margin:0;
}

#modal input {
  border: 0;
  border-bottom: 1px solid #0489B1;
  outline : 0;
}

#modal button {
  display:inline-block;
  width:33%;
  margin-center:calc(100% - 100px - 10px);
  float:left;
  color: blue;
  background-color: rgba(0,0,0,0);
  border: 0;
  outline : 0;

}

#modal .modal_content {
  width:600px;
  margin:100px auto;
  padding:0px 40px;
  background:#fff;
  border:2px solid #666;
}

#modal .modal_layer {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:rgb(0, 0, 0, 0.5);
  z-index:-1;
}

tbody>tr {
  counter-increment: aaa;
}
tbody>tr>td:first-child:before {
  content: counter(aaa) " ";
}

</style>


<div id="modal">

    <div class="modal_content">
            <h2 style = "font-weight:bold"><U>프로젝트 상세 관리</U></h2><br>
        <div id = "projectInfo">
            <span style="color: #0489B1;
                         font-size: 1.0em;
                         padding:20px;">

                <p>프로젝트 명<br>
                    <input type = "text" name = "prj_nm" placeholder="input text"></p>

                <p>고객사 계약 코드<br>
                    <input type = "text" name = "cnct_cd" placeholder="input text"></p>

                <p>원청사<br>
                    <input type = "text" name = "gnr_ctro" placeholder="input text"></p>

                <p>계약사<br>
                   <input type = "text" name = "ctro" placeholder="input text"></p>

                <p>계약 금액<br>
                    <input type = "text" name = "cnct_amt" placeholder="input text"></p>

                <p>매출 사업부<br>
                    <select size ="1" style="width:200px" name = "slin_bzdp" class="col-sm-2">
                        <option value = "01">01</option>
                        <option value = "02">02</option>
                        <option value = "03">03</option>
                    </select>
                </p>

                <p>업무 구분<br>
                    <select size ="1" style="width:200px" name = "job_divs" class="col-sm-2">
                        <option value = "SM">SM</option>
                        <option value = "SI">SI</option>
                    </select>
                </p>

                <p>진행 상태<br>
                    <select size ="1" style="width:200px" name = "pgrs_stus" class="col-sm-2">
                        <option value = "01">예정</option>
                        <option value = "진행 중">진행 중</option>
                        <option value = "종료">종료</option>
                    </select>
                </p>

                <p>비고<br>
                    <input type = "text" name = "rmks" placeholder="input text"></p>

            </span>




        <button name="addStaff" style="float:right color:blue">추가</button>
        <button name="delStaff" style="float:right color:red">삭제</button>
        <br>
            <table id="reqSkil" class="table" style="margin-top: 20px;">
                <colgroup>
                    <col width="20%"/>
                    <col width="40%"/>
                    <col width="40%"/>
                </colgroup>

                <thead>
                <tr>
                    <th>순번</th>
                    <th>구분</th>
                    <th>스킬명</th>
                </tr>
                </thead>

                <tbody id="reqSkilBody" name = "req_skil">
                    <tr name="trSkil">
        <!--                <td> <input type="text" class="form-control" name="staff_name" placeholder="순번"> </td>-->
                        <td id="staff_name"></td>
                        <td> <input type="text" class="form-control" name="req_skil_divs" placeholder="구분"></td>
                        <td> <input type="text" class="form-control" name="req_skil_name" placeholder="스킬명"></td>
                    </tr>
                </tbody>
            </table>

        </div>

        <hr>
            <button type="button" id="modal_close_btn">취소</button>
            <button type="button" id="modal_save_btn">저장</button>
            <button type="button" id="modal_delete_btn" style="color:red">삭제</button>

        <br>
     
    </div>



   
    <div class="modal_layer"></div>
</div>






<script>
    document.getElementById("modal_close_btn").onclick = function() {
        window.history.back();
    }

    $(document).on("click","button[name=addStaff]",function(){
        var count = 0;
        var addStaffText =     '<tr name="trSkil">'+
            '        <td id="staff_name"></td>'+
            '        <td> <input type="text" class="form-control" name="req_skil_divs" placeholder="구분"></td>'+
            '        <td> <input type="text" class="form-control" name="req_skil_name" placeholder="스킬"></td>'+
            '</tr>';

        var trHtml = $( "tr[name=trSkil]:last" );

        trHtml.after(addStaffText);

    });

    $(document).on("click","button[name=delStaff]",function(){
        var table = document.getElementById('reqSkilBody');
        if (table.rows.length < 2) return;

        $('#reqSkil tbody tr:last').remove();
    });


    $('#modal_save_btn').click(function(){
            console.log('저장');
                confirmMsg('저장 하시겠습니까?', function(){

                    $('#projectInfo').ajaxCall({
                    method : 'POST',
                    url : '/skil/prjSave/post',
                    callbackFn : function(data){
                        g_toast.push('저장 되었습니다.');
                    }
                });
            });
    });



</script>



{% endblock %}

