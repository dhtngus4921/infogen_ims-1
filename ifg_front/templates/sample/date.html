{% extends 'common/sampleBase.html' %}

{% block content %}
    <script type="text/javascript">
        $(document).ready(function(){
            var picker = new ax5.ui.picker();
            picker.bind({
                target: $('[data-ax5picker="basic"]'),
                direction: "top",
                content: {
                    width: 270,
                    margin: 10,
                    type: 'date',
                    config: {
                        control: {
                            left: '<i class="fa fa-chevron-left"></i>',
                            yearTmpl: '%s',
                            monthTmpl: '%s',
                            right: '<i class="fa fa-chevron-right"></i>'
                        },
                        lang: {
                            yearTmpl: "%s년",
                            months: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],
                            dayTmpl: "%s"
                        },
                        marker: (function () {
                            var marker = {};
                            marker[ax5.util.date(new Date(), {'return': 'yyyy-MM-dd', 'add': {d: 0}})] = true;

                            return marker;
                        })()
                    },
                    formatter: {
                        pattern: 'date'
                    }
                },
                onStateChanged: function () {
                    if (this.state == "open") {
                        //console.log(this.item);
                        var selectedValue = this.self.getContentValue(this.item["$target"]);
                        if (!selectedValue) {
                            this.item.pickerCalendar[0].ax5uiInstance.setSelection([ax5.util.date(new Date(), {'add': {d: 1}})]);
                        }
                    }
                }
            });

            picker.bind({
                target: $('[data-ax5picker="range"]'),
                direction: "top",
                content: {
                    width: 270,
                    margin: 10,
                    type: 'date',
                    config: {
                        control: {
                            left: '<i class="fa fa-chevron-left"></i>',
                            yearTmpl: '%s',
                            monthTmpl: '%s',
                            right: '<i class="fa fa-chevron-right"></i>'
                        },
                        lang: {
                            yearTmpl: "%s년",
                            months: ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'],
                            dayTmpl: "%s"
                        }
                    }
                },
                onStateChanged: function () {

                }
            });

            picker.bind({
                target: $('[data-picker-date="year"]'),
                content: {
                    type: 'date',
                    config: {
                        mode: "year", selectMode: "year"
                    },
                    formatter: {
                        pattern: 'date(year)'
                    }
                }
            });

            picker.bind({
                target: $('[data-picker-date="month"]'),
                content: {
                    type: 'date',
                    config: {
                        mode: "year", selectMode: "month"
                    },
                    formatter: {
                        pattern: 'date(month)'
                    }
                }
            });

            // calendar
            var myCalendar = new ax5.ui.calendar({
                target: document.getElementById("calendar-target"),
                control: {
                    left: '<i class="fa fa-chevron-left"></i>',
                    yearTmpl: '%s',
                    monthTmpl: '%s',
                    right: '<i class="fa fa-chevron-right"></i>',
                    yearFirst: true
                },
                multipleSelect:2,
                displayDate: (new Date()),
                onClick: function () {
                    var dates = this.self.getSelection();
                    if (dates.length > 1) {
                        var minDate = new Date(Math.min(ax5.util.date(dates[0]).getTime(), ax5.util.date(dates[1]).getTime()));
                        var maxDate = new Date(Math.max(ax5.util.date(dates[0]).getTime(), ax5.util.date(dates[1]).getTime()));

                        this.self.setPeriod({
                            range: [
                                {from: minDate, to: maxDate, fromLabel: 'S', toLabel: 'E'}
                            ]
                        });
                    }
                },
                onStateChanged: function () {
                    console.log(this);
                }
            });
        });
    </script>
    <style>
        .row { margin-bottom: 10px; }
        [class|="col"] {
          font-weight: 700;
          padding: 10px;
        }
    </style>
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <h3>Date Picker <a href="http://ax5.io/ax5ui-picker/api/index.html" class="badge badge-info">Info</a></h3>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-2">
                <div><h5>일자 선택</h5></div>
                <div class="input-group" data-ax5picker="basic">
                    <input type="text" class="form-control" placeholder="yyyy-mm-dd">
                    <span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>
                </div>
            </div>
            <div class="col-sm-6">
                <div><h5>기간 선택</h5></div>
                <div class="input-group" data-ax5picker="range">
                    <input type="text" class="form-control" placeholder="yyyy-mm-dd">
                    <span class="input-group-addon">~</span>
                    <input type="text" class="form-control" placeholder="yyyy-mm-dd">
                    <span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>
                </div>
            </div>
            <div class="col-sm-2">
                <div><h5>연도 선택</h5></div>
                <div class="input-group" data-ax5picker="year">
                    <input type="text" class="form-control" data-picker-date="year" placeholder="yyyy">
                    <!--<span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>-->
                </div>
            </div>
            <div class="col-sm-2">
                <div><h5>월 선택</h5></div>
                <div class="input-group" data-ax5picker="month">
                    <input type="text" class="form-control" data-picker-date="month" placeholder="yyyy-mm">
                    <!--<span class="input-group-addon"><i class="fa fa-calendar-o"></i></span>-->
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <h3>Calendar <a href="http://ax5.io/ax5ui-calendar/api/index.html" class="badge badge-info">Info</a></h3>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div id="calendar-target" style="width:600px;border:1px solid #ccc;border-radius: 5px;padding: 5px;overflow: hidden;height:600px;"></div>
            </div>
        </div>

    </div>
{% endblock %}