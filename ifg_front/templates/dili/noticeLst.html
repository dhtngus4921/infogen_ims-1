{% extends 'common/base.html' %}

{% block content %}
<script type="text/javascript" xmlns:max-width="http://www.w3.org/1999/xhtml">
        var firstGrid;
        $(document).ready(function(){

            firstGrid = $('[data-ax5grid="first-grid"]');

            var gridOptions = {
                columns: [  /* columns : 그리드 헤더 및 매핑 시킬 컬럼 및 컬럼 속성 설정 항목(필수) */
                { key: "TIT",            label: "제목",       width: 100,  align: "center"},
                { key: "CNTN",           label: "내용",        hidden : true},
                { key: "KD_DIVS_CD",     label: "유형구분코드",       width: 80,   align: "center"},
                { key: "MJR_YN",         label: "중요여부",      hidden : true},
                { key: "POP_OPEN_YN",    label: "팝업호출여부",         hidden : true},
                { key: "DATA_INPT_ID",   label: "데이터입력자ID",        hidden : true},
                { key: "EMP_NAME",     label: "작성자",       width: 80,   align: "center"},
                { key: "DATA_INPT_DTTM", label: "데이터입력일시", width: 120,  align: "center"},
                { key: "DATA_INPT_PGM_ID",   label: "데이터입력프로그램ID",   hidden : true},
                { key: "DATA_UPD_ID",     label: "데이터수정자ID",      hidden : true},
                { key: "DATA_UPD_DTTM",   label: "데이터수정일시",     hidden : true},
                { key: "DATA_UPD_PGM_ID", label: "데이터수정프로그램ID",       hidden : true}
                ]
            };

            firstGrid = $('[data-ax5grid="first-grid"]').initGrid(gridOptions);

            $('#searchBtn').click(function(){
                getGridList(1);
            });

            getGridList(1);

        });

        function makePaging(ret){
            $('#paging_navi').makePagingNavi(ret, 'getGridList');
        }

        function getGridList(page){
            var options = {
                method : 'get',
                url : "{% url 'dili_api:getNoticeLst' %}",
                callbackFn :  function(ret){
                    debugger;
                    if(ret.list.length == 0){
                        alertMsg('데이터가 없습니다.');
                        firstGrid.setData([]);
                        return false;
                    }
                    firstGrid.setData(ret.list);
                    firstGrid.select(0);

                    makePaging(ret);
                }
            };

            $.ajaxCall({ page : page,
                         dept : 'deptValue',
                         name : 'deptValue',
                         division : 'divisionValue',
                         skilKind : 'skilKindValue',
                         skil : 'skilValue',
                         category : $('[name="category"]').val(),
                         searchStr : $('[name="searchStr"]').val()
                         }, options);

        }
    </script>


    <div class="container" style="margin-top:30px"><!--margin 임시로 줌. 이후 수정 필요 -->
        <!-- 제목 -->
        <div>
            <h5><b>공지사항</b></h5>
        </div>

        <div style="position: relative;height:400px;" id="grid-parent">
            <div data-ax5grid="first-grid" style="height: 100%;"></div>
            <div id="paging_navi"></div>
            <button class="btn btn-primary" id="skillDetlMentBtn" style="float: right; padding-top :10px;">글쓰기</button>
        </div>


        <br/><br/>
        <!-- 검색 div -->

        <div class="container">
            <div class="input-group">
                    <select name="category" class="input-group-prepend btn btn-light float-left">
                         <option value="00" selected>제목</option>
                         <option value="01">내용</option>
                         <option value="02">제목 + 내용</option>
                         <option value="03">작성자</option>
                    </select>

                <!--<div class="input-group-text w-25">-->
                    <input type="text" name="searchStr" class="form-control w-25" placeholder="검색어를 입력하세요.">
                <!--</div>-->

                <div class="input-group-append">
                    <button id="searchBtn" class="btn btn-primary" type="button">조회</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}