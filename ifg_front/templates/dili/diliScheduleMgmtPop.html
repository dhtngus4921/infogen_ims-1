

<script type="text/javascript">
    $(document).ready(function(){
        dataControl();
        console.log("초과시간테스트 : ",overWrkTmChk("10:00:00"));
        console.log("초과시간테스트 : ",overWrkTmChk("08:00:00"));

    });

    function dataControl(){

        var dt = $('#tmpPopDt').text();
        var strTm = $('#tmpPopStrtTm').text();
        var endTm = $('#tmpPopEndTm').text();
        var detlTm = $('#tmpPopDetlTm').text();
        var allTm = $('#tmpPopAllTm').text();
        var apvlStus = $('#tmpPopApvlStus').text();

        $('#pop_dt').text(dt);

        //console.log("시간차이 테스트 : ",timeControl(dt, strTm, endTm));

        if(getCurrentDate() == dt){
            if(strTm == "-"){
                document.getElementById('pop_strtJob').innerHTML = '<input type="button" value="출근버튼">';
            }else {
                $('#pop_strtJob').text(strTm);
            }

            if(endTm == "-" && strTm != "-"){
                document.getElementById('pop_strtJob').innerHTML = '<input type="button" value="퇴근버튼">';
            }else {
                $('#pop_endJob').text(endTm);
            }

            if(endTm != "-" && strTm != "-") {
                $('#pop_schdDetlAllTm').text(timeControl(dt, strTm, endTm));
            }



        }else {

            $('#pop_strtJob').text(strTm);
            $('#pop_endJob').text(endTm);
            $('#pop_schdDetlTm').text(detlTm);
            $('#pop_schdDetlAllTm').text(allTm);
            $('#pop_apvlStus').text(apvlStus);
        }
    }
    function timeControl(date, strtTm, endTm){

        var tmpStrtDate = date+" "+strtTm;
        var tmpEndDate = date+" "+endTm;

        var strtDate = new Date(tmpStrtDate);
        var endDate = new Date(tmpEndDate);

        var tmpSubtractTm = endDate - strtDate;
        var hour = Math.floor((tmpSubtractTm % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)) - 1;
        var minute = Math.floor((tmpSubtractTm % (1000 * 60 * 60)) / (1000 * 60));
        var second = Math.floor((tmpSubtractTm % (1000 * 60)) / 1000);


        var subtractTm = lpad((hour).toString(),2,"0")+":"+lpad((minute).toString(),2,"0")+":"+lpad((second).toString(),2,"0");

        return subtractTm
    }

    function overWrkTmChk(allTmData){
        var overTmChk = 0;
        var tmpOverTmChk = allTmData.split(':');

        if(Number(tmpOverTmChk[0]) > 8){

            overTmChk = 1;
        }

        return overTmChk
    }

</script>

<table class="table table-bordered table-responsive-md table-striped text-center" style="width: 500px">
    <tr>
        <th class="text-center" style="width: 200px">일자</th>
        <td class="pt-3-half" contenteditable="false" id="pop_dt"></td>
    </tr>
    <tr>
        <th class="text-center">업무시작시간</th>
        <td class="pt-3-half" contenteditable="false" id="pop_strtJob"></td>
    </tr>
    <tr>
        <th class="text-center">업무종료시간</th>
        <td class="pt-3-half" contenteditable="false" id="pop_endJob"></td>
    </tr>
    <tr>
        <th class="text-center">근무시간상세</th>
        <td class="pt-3-half" contenteditable="false" id="pop_schdDetlTm"></td>
    </tr>
    <tr>
        <th class="text-center">총근무시간</th>
        <td class="pt-3-half" contenteditable="false" id="pop_schdDetlAllTm"></td>
    </tr>
    <tr>
        <th class="text-center">결재상태</th>
        <td class="pt-3-half" contenteditable="false" id="pop_apvlStus"></td>
    </tr>
</table>
